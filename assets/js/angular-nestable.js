!function(e,t,n,o){n.module("ng-nestable",[]).provider("$nestable",function(){var e="$item",t={};this.$get=function(){return{modelName:e,defaultOptions:t}},this.modelName=function(t){e=t},this.defaultOptions=function(e){t=e}}).directive("ngNestable",["$compile","$nestable",function(e,t){function o(e,t){var n=$('<div class="dd"></div>'),o=$('<ol class="dd-list"></ol>').appendTo(n);return e.forEach(function r(e){var n=Array.prototype.slice.call(arguments).slice(-1)[0];n instanceof $||(n=o);var i=$('<li class="dd-item" id="'+e.item.id+'"></li>'),s=$('<div ng-nestable-item class="dd-handle"></div>');if(s.append(t).appendTo(i),n.append(i),i.data("item",e.item),a(e.children)&&e.children.length>0){var p=$('<ol class="dd-list"></ol>').appendTo(i);e.children.forEach(function(e){r.apply(this,Array.prototype.slice.call(arguments).concat([p]))})}}),n}function a(e){return"[object Array]"===Object.prototype.toString.call(e)}function r(e,t){var n=t.$formatters,o=n.length;for(t.$modelValue=e;o--;)e=n[o](e);return e}return{restrict:"A",require:"ngModel",scope:{dragstart:"&",dragend:"&"},compile:function(n){var a={method:null,node:null,parent:null},i=n.html();return n.empty(),function(n,s,p,c){t.defaultOptions.onDragFinished=function(e,t){a.method="finish",a.node=e&&e.id?e.id:null,a.parent=t&&t.id?t.id:null,n.dragend({node:a.node,parent:a.parent})},t.defaultOptions.onDragStarted=function(e,t){a.method="start",a.node=e&&e.id?e.id:null,a.parent=t&&t.id?t.id:null,n.dragstart({node:a.node,parent:a.parent})};var u=$.extend({},t.defaultOptions,n.$eval(p.ngNestable));n.$watchCollection(function(){return c.$modelValue},function(t){if(t){t=r(t,c);var a=o(t,i);s.empty().append(a),e(a)(n),a.nestable(u),a.on("change",function(e,t){c.$setViewValue(a.nestable("serialize")),n&&n.$root&&n.$root.$$phase||n.$apply()})}})}},controller:n.noop}}]).directive("ngNestableItem",["$nestable",function(e){return{scope:!0,require:"^ngNestable",link:function(t,n){t[e.modelName]=n.parent().data("item")}}}])}(window,document,window.angular);